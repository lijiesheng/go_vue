{{ define "chapter02/user_add3.html" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<!--    引入js-->
    <script src="/static/js/jquery.min.js"></script>
</head>
<body>
    这是 user_add3 页面
    <br><br>
    <form>
        用户名: <input type="text" id="username">
        <br>
        密&nbsp;&nbsp;码:<input type="password" id="password">
        <br>
        篮球<input type="checkbox" name="love" value="篮球">
        足球<input type="checkbox" name="love" value="足球">
        乒乓球<input type="checkbox" name="love" value="乒乓球">
        棒球<input type="checkbox" name="love" value="棒球">
        <br>

       地址 <input type="text" id="user[address]">
        <br>
        电话 <input type="text" id="user[phone]">
        <br>
        <input type="button" value="提交" id="add_btn">
    </form>

    <script>
        var add_btn = document.getElementById("add_btn");
        add_btn.onclick = function () {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var checkID = [];//定义一个空数组
            $("input[name='love']:checked").each(function(i){//把所有被选中的复选框的值存入数组
                checkID[i] =$(this).val();
            });
            console.log(checkID);
                $.ajax({
                url : "/chapter02/do_user_add3",
                type : "POST",
                // traditional: true,   // 可以传递字符串，
                data : {
                    "username" : username,
                    "password" : password,
                    // "love" : checkID,
                    "love" : JSON.stringify(checkID)
                },
                success: function (data) {
                    alert(data["code"])
                    alert(data["msg"])
                },
                fail: function (data) {

                }
            })
        }
    </script>

</body>
</html>
{{end}}

<!--使用 ajax 提交-->